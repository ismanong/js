(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{16:function(t,e,a){t.exports=a("Mh02")},"D5s/":function(t,e,a){},Mh02:function(t,e,a){"use strict";(function(t){var e=a("TqRt");a("Tze0"),a("a1Th"),a("h7Nl"),a("Btvt"),a("pIFo"),a("Vd3H"),a("xfY5"),a("V+eJ"),a("dRSK"),a("SRfc"),a("0l/t"),a("Oyvg"),a("KKXr"),a("8+KV");var n=e(a("lwsE")),i=e(a("W8MJ"));a("D5s/");var c,o=function(){function t(e){(0,n["default"])(this,t),this.util=ACGN.util,this.config=ACGN.config,this.selectTags={},this.keyword="",this.order="renqi",this.allcomic=[],this.inited=!1,this.initFn=[],this.init(e)}return(0,i["default"])(t,[{key:"onInit",value:function(t){var e="function"==typeof t?t:function(){};this.inited?e():this.initFn.push(e)}},{key:"init",value:function(t){var e=this,a=this.util.limitStore("allcomic"),n=this,i=function(){e.initFn.forEach(function(t){t()}),e.initFn=[]};a?(this.allcomic=a,n.showComicList({elementBox:t.elementBox,elementPage:t.elementPage,pageSize:t.pageSize,nth:t.nth,data:a,curPage:n.replacePage()}),this.inited=!0,i()):ACGN.ajax({url:"/api/getComicList/",cache:!0,success:function(e){if(0===e.status){var a=e.data;n.allcomic=e.data,n.util.limitStore("allcomic",a,{expires:.5}),n.showComicList({elementBox:t.elementBox,elementPage:t.elementPage,pageSize:t.pageSize,nth:t.nth,data:a,curPage:n.replacePage()}),this.inited=!0,i()}},error:function(t){}})}},{key:"setSelectTags",value:function(t,e){var a=(t=t.split("-"))[0],n=t[1],i=t[2],c=this.selectTags[a]||[],o=this.util.inArray(n,c,"key");o?this.selectTags[a].splice(o-1,1):(n?c.push({key:n,text:e,urlid:i}):c=[],this.selectTags[a]=c);var s=[];for(var r in this.selectTags)s=s.concat(this.selectTags[r]);return{obj:this.selectTags,arr:s}}},{key:"getFilterData",value:function(t,e,a){for(var n=t,i="",c=0;c<a.length;c++)i+="(".concat(a.charAt(c),".*?)");var o=new RegExp(i,"gi");n=n.filter(function(t){return!!t.comic_name.match(o)||!!t.PinYin_name.match(o)}),this.keyword=a;var s="";for(var r in e){var l=e[r];if(0!==l.length)for(var g=0;g<l.length;g++){var h=l[g];s+="".concat(h.urlid,",|")}}if(!s.length)return n;s=s.slice(0,-1);var u=new RegExp(s);return n.filter(function(t){return u.test(t.cartoon_type_list_name)})}},{key:"setFilterDOM",value:function(t,e,a){this.showComicList({elementBox:r.elementBox,elementPage:r.elementPage,data:t,pageSize:r.pageSize,curPage:e||1,nth:r.nth})}},{key:"clickTagHanddle",value:function(t,e){t.hasClass("acgn-active")?0===e?t.siblings().removeClass("acgn-active"):t.removeClass("acgn-active"):(0===e?t.siblings().removeClass("acgn-active"):t.siblings().eq(0).removeClass("acgn-active"),t.addClass("acgn-active"))}},{key:"changeSift",value:function(t){return this.selectTagHTML(t)}},{key:"selectTagHTML",value:function(t){var e="",a=function(a){t[a].forEach(function(t){e+='<a href="javascript:;" class="acgn-attr" title="'.concat(t.text,'">\n            <span class="text">').concat(t.text,'</span>\n            <i class="acgn-close J_close" data-title="').concat(t.text,'" data-tag="').concat(a,"-").concat(t.key,"-").concat(t.urlid,'">&times;</i>\n          </a>')})};for(var n in t)a(n);return e}},{key:"showComicList",value:function(t){var e=this,a=t.elementBox,n=t.elementPage,i=t.data,c=t.pageSize,o=t.curPage,r=t.nth;c=c||48,r=r||6;var l=i.length,g=Math.ceil(l/c);if(!l)return n.addClass("acgn-hidden"),void a.html('<p class="acgn-no-info acgn-tac acgn-mb24">没有找到任何记录，请点击[<a href="javascript:;" class="acgn-green J_clear" target="_self">清除全部条件</a>]或重新选择条件!</p>');if(!(o>g)){for(var h=o*c>l?l:o*c,u="",d=(o-1)*c;d<h;d++){var m=(d-c+1)%r?null:r;u+=this.comicItemHtmlString(i[d],m)}var f=a.find("#J_comicList");return f.length?f.html(u):a.html('<ul id="J_comicList" class="acgn-comic-list acgn-col'.concat(r,' acgn-clearfix">').concat(u,"</ul>")),"第1页"!==s.text()&&s.text("第".concat(1,"页")),n.html(ACGN.business.pagination(parseInt(o),g,function(t){return e.showComicList({elementBox:a,elementPage:n,data:i,pageSize:c,curPage:t,nth:r}),s.text("第".concat(t,"页")),!1},!0)).removeClass("acgn-hidden"),!1}}},{key:"comicItemHtmlString",value:function(t,e){var a=e?" mgr0":"",n=this.order,i=t.latest_cartoon_topic_name?t.latest_cartoon_topic_name:"";return'<li class="acgn-item'.concat(a,'">\n      <a class="acgn-thumbnail"\n      href="/').concat(this.util.getComicId(siteConf,t),'/"\n      title="').concat(t.comic_name.addEnd("漫画"),'"\n      target="_blank">\n        <img class="cover" src="').concat(siteConf.staticRoot,'images/comm/space.gif" data-src="').concat(siteConf.pathRules.front_cover.format(t.comic_id),'" alt="').concat(t.comic_name,",").concat(t.comic_name.addEnd("漫画"),'">\n        <div class="wave-container">\n          <img class="wave-img" src="').concat(siteConf.staticRoot,'images/comm/wave.png" />\n          <div class="order-by">\n            <i class="ift-').concat(n,'"></i>\n            <span>').concat(this.getDataByType(n,t[n]),'</span>\n          </div>\n        </div>\n      </a>\n      <div class="acgn-info">\n        <h3 class="acgn-title">\n          <a href="/').concat(this.util.getComicId(siteConf,t),'/" title="').concat(t.comic_name.addEnd("漫画"),'" target="_blank">').concat(t.comic_name,'</a>\n        </h3>\n        <div class="acgn-desc">\n          <span class="new-topic">更至</span>\n          <a class="latest-cartoon"\n          title="').concat(i,'"\n          href="/').concat(this.util.getComicId(siteConf,t),"/").concat(this.util.getLastChapterId(siteConf,t),'.html"\n          target="_blank">').concat(i,"</a>\n        </div>\n      </div>\n    </li>")}},{key:"getDataByType",value:function(t,e){var a="";switch(t){case"renqi":case"dashang":a=ACGN.util.numberToUnitStr(e||0);break;case"score":a=String(e).indexOf(".")>-1?Number(e).toFixed(1):e;break;case"update_time":a=ACGN.util.getTimeSpan(new Date(e).getTime())}return a}},{key:"comicSort",value:function(t,e){if(t){var a="string"==typeof e?e:this.order;return this.order=a,t.sort(function(t,e){var n,i;return"update_time"===a?(n=new Date(t[a]).getTime(),i=new Date(e[a]).getTime()):(n=t[a],i=e[a]),i-n==0&&"update_time"!==a?new Date(e.update_time).getTime()-new Date(t.update_time).getTime():i-n})}}},{key:"renderData",value:function(t,e,a,n,i){var c=t||this.selectTags,o="string"==typeof e?e:this.keyword,s="string"==typeof a?a:this.order,r=this.allcomic;r=this.getFilterData(r,c,o),r=this.comicSort(r,s),n&&(r=r.reverse()),this.setFilterDOM(r,i,s)}},{key:"replacePage",value:function(){var t=location.pathname.replace(/.*_p(\d+)\.html/,"$1");return(t=t?parseInt(t,10):1)||1}}]),t}(),s=t(".J_crumb").find("strong"),r={elementBox:t("#J_comicListBox"),elementPage:t(".J_pages"),pageSize:48,nth:6};c=new o(r);var l=t(".J_filter dd"),g=t("#js_sort_keyword"),h=t("#js_sort_colation"),u=t(".J_clear");l.on("click","a",function(){var e=t(this),a=e.data("tag").toString(),n=e.data("title"),i=e.index();c.clickTagHanddle(e,i);var o=c.setSelectTags(a,n);for(var s in o.obj){o.obj[s].length||c.clickTagHanddle(t('[data-tag="'.concat(s,'"]')),0)}return c.renderData(o.obj),!1}),g.on("keyup",function(t){13===t.keyCode&&g.blur()}).on("change",function(t){h.click()}),h.on("click",function(t){var e=g.val().trim();e?(c.renderData(null,e),location.hash=encodeURIComponent(e)):c.renderData(null,"")});var d=function(){var e="";location.hash.replace(/^\#(.*)/,function(t,a){return e=a?decodeURIComponent(a):"",t}),c.keyword=e,g.val(e),g.change(),e!==t("#J_searchKeywords").attr("placeholder")&&t("#J_searchKeywords").val(e)};t("body").on("click",".J_clear",function(){return u.hide(),l.each(function(){var e=t(this).children(".acgn-sort-attr:eq(0)");if(e.length){var a=e.data("tag").toString();c.clickTagHanddle(e,0),c.setSelectTags(a)}}),g.val(""),c.renderData({},"",""),objfilterTag.html(noInfo),!1});var m=t("#J_switch_txt"),f=t("#J_switch_ift"),v=t("#J_switch_content");t("#J_switch").on("click",function(){f.hasClass("ift-more-top")?(m.text("展开选项"),v.slideUp(),f.attr("class","ift-more-bottom")):(v.slideDown(),m.text("收起选项"),f.attr("class","ift-more-top"))}),t("#J_sort").on("click",".acgn-item",function(){var e=t(this);if(e.hasClass("acgn-active"))return!1;var a=e.data("type");c.renderData(null,null,a,!1,parseInt(t(".acgn-pages:eq(0) .acgn-active").text())),e.addClass("acgn-active").siblings().removeClass("acgn-active")}),c.onInit(function(){var e=location.pathname.toLowerCase(),a=t('.J_filter a.acgn-sort-attr[href="/sort/'.concat(/[^\/]*$/gi.exec(e.replace(/_p\d+/,""))[0],'"]'));if(a.length){var n=a.data("tag")||"",i=n.split("-"),o=e.match(/_p(\d+)/),s=a.data("title"),r={};r[i[0]]=[{key:i[1],text:s,urlid:i[2]}],c.setSelectTags(n,s),c.renderData(r,null,null,!1,o?o[1]:1)}else d();if("onhashchange"in window)t(window).on("hashchange",function(){d()});else{var l=location.hash;setInterval(function(){l!==location.hash&&(d(),l=location.hash)},320)}})}).call(this,a("+2Rf"))}},[[16,0,1]]]);